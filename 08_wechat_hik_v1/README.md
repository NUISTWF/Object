# 项目名称：基于TCP的WeChat聊天系统

## 项目概述

本项目是一个基于TCP协议的聊天系统，旨在为用户提供一个功能丰富、易于使用的即时通讯平台。系统支持用户注册、登录、注销、好友管理、消息发送和接收等功能，并确保消息的实时性和可靠性。

## 文件介绍

.
│── doc
│   └── admin                      --> 作者信息
│── INSTALL
│   └── operation.md               --> 操作文档
│── Makefile                       --> 整个项目的总 Makefile（编译直接在当前目录make即可）
│── README.md                      --> 整体项目说明
│── src                            --> 源码文件夹
│   │── client1                    --> 客户端1文件夹（作为一个用户来执行./client1）
│   │   ├── client1.c              --> 客户端1源代码
│   │   ├── hello.c                --> 客户端1测试文件（用户1发文件给好友）
│   │   ├── Makefile               --> 客户端1的 Makefile
│   │   └── test.txt               --> 客户端1测试文件（用户1发文件给好友）
│   │── client2  
│   │   ├── client2.c              --> 客户端2源代码
│   │   └── Makefile               --> 客户端2的 Makefile
│   │── client3
│   │   ├── client3.c              --> 客户端3源代码
│   │   └── Makefile               --> 客户端3的 Makefile
│   │── include             
│   │   └── proto.h                --> 服务器客户端双方通信协议头文件
│   └── server                     --> 服务器文件夹
│       ├── Makefile               --> 服务器 Makefile
│       └── server.c               --> 服务器源代码
└── wechat.pptx                    --> 项目的ppt
![image](https://github.com/user-attachments/assets/bb72e291-25e0-482c-871a-b46ce14f73fc)


## 功能模块

### 1. 用户管理

- **注册**：用户可以通过命令行输入用户名和密码进行注册。
- **登录**：用户输入正确的用户名和密码后，登录成功。
- **注销**：用户可以注销自己的账户，并删除相关的聊天记录。

### 2. 聊天记录管理

- **查询历史聊天记录**：用户可以查询与特定好友的历史聊天记录。
- **删除聊天记录**：用户可以删除与特定好友的聊天记录。

### 3. 好友管理

- **添加好友**：用户可以添加已注册的用户为好友。
- **删除好友**：用户可以删除已添加的好友。

### 4. 消息发送与接收

- **发送消息**：用户可以给已注册的好友发送消息，如果好友不在线，也可以支持发送。
- **接收消息**：用户登录后，可以立即显示是哪个好友给我发送的消息。

### 5. 服务器管理

- **广播消息**：服务器可以向任意客户端发送消息。
- **多客户端连接**：服务器支持同时连接多个客户端，实现互相添加好友和发送消息。

### 6. 实时同步

- **在线状态同步**：用户的在线状态会实时同步，用户可以查看好友的在线状态。
- **消息持久化**：用户在给在线好友发送消息时，如果对方突然下线，下一次对方上线后也会立即收到。

## 技术实现

- **TCP协议**：使用TCP协议实现客户端与服务器之间的可靠通信。
- **数据库**：使用嵌入式内的轻量级数据库存储用户信息、好友关系和聊天记录。
- **多线程**：服务器端使用多线程处理多个客户端的连接和请求。

## 总结

基于TCP的WeChat聊天系统是一个功能全面、易于使用的即时通讯平台。通过实现用户管理、好友管理、消息发送与接收等功能，用户可以轻松地进行注册、登录、聊天等操作。同时，系统还支持服务器广播消息、多客户端连接和消息持久化，确保了消息的实时性和可靠性。

## 注意事项

- 请确保在运行项目之前已经安装了必要的依赖库，如SQLite。
- 在运行项目之前，请先编译服务器和客户端程序。
- 在运行客户端程序之前，请先启动服务器程序。
- 后续可以进一步拓展，开发环境上装上服务器，例如boa，利用ajax/cgi技术进行交互，可以使用HTML+CSS+JS进行网页设计，完成项目的上位机版本。
- 经过测试发现，目前的开发存在部分问题；比如：添加好友没有需要对方同意就成功添加，这个功能不困难可以添加；还有就是传输大文件的时候，我未采取多次循环接受文件流，就是多次open/close，觉得应用层与内核层多次切换耗时，还未想到很好的解决方法。
- 本项目是本人于海康实习期间自研开发，仅供学习和交流使用，未经允许不可随意转发抄袭！
